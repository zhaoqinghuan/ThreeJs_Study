<!DOCTYPE html>
<html>
  <head>
    <title>Three.js 基本几何体</title>
    <script type="text/javascript" src="../build/three.js"></script>
    
    <script type="text/javascript">
      //  init 函数，在HTML加载完后执行
      function init() {
        //  渲染器（Renderer）
        var renderer = new THREE.WebGLRenderer({
          //  将 Renderer 和 Canvas 元素进行绑定，提前在 HTML 中手动定义了 id 为 mainCanvas 的 Canvas 元素
          canvas: document.getElementById('mainCanvas')
        });
        renderer.setClearColor(0x000000); //  对背景进行着色
                
        //  场景（Scene）
        var scene = new THREE.Scene();
        
        //  相机（camera）
        var camera = new THREE.OrthographicCamera(-5, 5, 3.75, -3.75, 0.1, 100);
        camera.position.set(25, 25, 25);
        camera.lookAt(new THREE.Vector3(0, 0, 0));
        scene.add(camera);
        
        //  绘制坐标轴
        drawAxes(scene);
        
        //  将设置设置材质属性单独提取出来
        var material = new THREE.MeshBasicMaterial({
            color: 0xff0000,
            wireframe: true
        })
        
        //  将绘制几何体单独封装成函数（因为需要绘制许多不同的几何体）
        drawCube(scene, material);  //  绘制立方体
        //  drawPlane(scene, material); //  绘制长方形
        //  drawSphere(scene, material); // 绘制球体
        //  drawCircle(scene, material); // 绘制圆形
        //  drawCylinder(scene, material); // 绘制圆柱
        //  drawTetra(scene, material); // 绘制正四面体
        //  drawOcta(scene, material); // 绘制正八面体
        //  drawIcosa(scene, material); // 绘制正二十面体
        //  drawTorus(scene, material); //  绘制圆环面
        //  drawTorusKnot(scene, material); //  绘制圆环节

        // 渲染
        renderer.render(scene, camera);
      }

      //  圆环节
      function drawTorusKnot(scene, material) {
        //  THREE.TorusKnotGeometry(radius, tube, radialSegments, tubularSegments, p, q, heightScale)
        //    radius是圆环半径；tube是管道半径；radialSegments与tubularSegments分别是两个分段数；p和q是控制其样式的参数，一般可以缺省；heightScale是在z轴方向上的缩放；
        var torus = new THREE.Mesh(new THREE.TorusKnotGeometry(2, 0.5, 32, 8), material);
        scene.add(torus);
      }

      //  圆环形
      function drawTorus(scene, material) {
        //  THREE.TorusGeometry(radius, tube, radialSegments, tubularSegments, arc)
        //    radius是圆环半径；tube是管道半径；radialSegments与tubularSegments分别是两个分段数；arc是圆环面的弧度，缺省值为Math.PI * 2。
          var torus = new THREE.Mesh(new THREE.TorusGeometry(3, 1, 4, 8), material); // 粗糙的圆环面
        //  var torus = new THREE.Mesh(new THREE.TorusGeometry(3, 1, 12, 18), material); // 较为精细的圆环面
        //  var torus = new THREE.Mesh(new THREE.TorusGeometry(3, 1, 4, 8, Math.PI / 3 * 2), material); // 部分圆环面
        scene.add(torus);
      }

      //  正二十面体
      function drawIcosa(scene, material) {
        //  THREE.IcosahedronGeometry(radius, detail)
        //    其中，radius是半径；detail是细节层次（Level of Detail）的层数，
        //    对于大面片数模型，可以控制在视角靠近物体时，显示面片数多的精细模型，而在离物体较远时，显示面片数较少的粗略模型。
        var icosa = new THREE.Mesh(new THREE.IcosahedronGeometry(3), material);
        scene.add(icosa);
      }
      
      //  正八面体
      function drawOcta(scene, material) {
        //  THREE.OctahedronGeometry(radius, detail)
        //    其中，radius是半径；detail是细节层次（Level of Detail）的层数，
        //    对于大面片数模型，可以控制在视角靠近物体时，显示面片数多的精细模型，而在离物体较远时，显示面片数较少的粗略模型。
        var octa = new THREE.Mesh(new THREE.OctahedronGeometry(3), material);
        scene.add(octa);
      }

      //  正四面体
      function drawTetra(scene, material) {
        //  THREE.TetrahedronGeometry(radius, detail)
        //    其中，radius是半径；detail是细节层次（Level of Detail）的层数，
        //    对于大面片数模型，可以控制在视角靠近物体时，显示面片数多的精细模型，而在离物体较远时，显示面片数较少的粗略模型。
        var tetra = new THREE.Mesh(new THREE.TetrahedronGeometry(3), material);
        scene.add(tetra);
      }

      //  绘制圆柱体
      function drawCylinder(scene, material) {
        //  THREE.CylinderGeometry(radiusTop, radiusBottom, height, radiusSegments, heightSegments, openEnded)
        //    radiusTop与radiusBottom分别是顶面和底面的半径，由此可知，当这两个参数设置为不同的值时，实际上创建的是一个圆台；
        //    height是圆柱体的高度；radiusSegments与heightSegments可类比球体中的分段；
        //    openEnded是一个布尔值，表示是否没有顶面和底面，缺省值为false，表示有顶面和底面。
        var cylinder = new THREE.Mesh(new THREE.CylinderGeometry(2, 2, 4, 18, 3), material); // 圆柱
        // var cylinder = new THREE.Mesh(new THREE.CylinderGeometry(2, 3, 4, 18, 3), material); //  圆台
        // var cylinder = new THREE.Mesh(new THREE.CylinderGeometry(2, 3, 4, 18, 3, true), material); //  无顶无底圆台
        scene.add(cylinder);
      }      

      //  绘制圆形
      function drawCircle(scene, material) {
        //  THREE.CircleGeometry(radius, segments, thetaStart, thetaLength)
        //    radius是半径；segments是切片数；thetaStart表示开始时的弧度；thetaLength表示结束时的弧度。
        var circle = new THREE.Mesh(new THREE.CircleGeometry(3, 18, Math.PI / 3, Math.PI / 3 * 4), material);
        scene.add(circle);
      }

      //  绘制球形
      function drawSphere(scene, material) {
        //  THREE.SphereGeometry(radius, segmentsWidth, segmentsHeight, phiStart, phiLength, thetaStart, thetaLength)
        //    radius是半径；segmentsWidth表示经度上的切片数；segmentsHeight表示纬度上的切片数；phiStart表示经度开始的弧度；
        //    phiLength表示经度跨过的弧度；thetaStart表示纬度开始的弧度；thetaLength表示纬度跨过的弧度。
        //  var sphere = new THREE.Mesh(new THREE.SphereGeometry(3, 8, 6), material); // 创建一个半径为3，经度划分成8份，纬度划分成6份的球体
        //  segmentsWidth 相当于经度被切成了几瓣，而 segmentsHeight 相当于纬度被切成了几层。因为在图形底层的实现中，并没有曲线的概念，曲线都是由多个折线近似构成的。
        //  对于球体而言，当这两个值较大的时候，形成的多面体就可以近似看做是球体了。
        
        //  经度弧度
        //  new THREE.SphereGeometry(3, 8, 6, Math.PI / 6, Math.PI / 3)表示起始经度为Math.PI / 6，经度跨度为Math.PI / 3。
        //  这里segmentsWidth为8意味着对于经度从Math.PI / 6跨过Math.PI / 3的区域内划分为8块，而不是整个球体的经度划分成8块后再判断在此经度范围内的部分。
        //  var sphere = new THREE.Mesh(new THREE.SphereGeometry(3, 8, 6, Math.PI / 6, Math.PI / 3), material);
        
        //  纬度弧度
        //  new THREE.SphereGeometry(3, 8, 6, 0, Math.PI * 2, Math.PI / 6, Math.PI / 3) // 意味着纬度从Math.PI / 6跨过Math.PI / 3。
        //  var sphere = new THREE.Mesh(new THREE.SphereGeometry(3, 8, 6, 0, Math.PI * 2, Math.PI / 6, Math.PI / 3), material);
        
        //  跨经度 & 跨纬度
        var sphere = new THREE.Mesh(new THREE.SphereGeometry(3, 8, 6,
              Math.PI / 2, Math.PI, Math.PI / 6, Math.PI / 2), material);

        scene.add(sphere);
      }

      //  绘制平面长方形
      function drawPlane(scene, material) {
        //  THREE.PlaneGeometry(width, height, widthSegments, heightSegments)
        //    width是x方向上的长度；height是y方向上的长度；后两个参数同样表示分段。
        var plane = new THREE.Mesh(new THREE.PlaneGeometry(2, 4), material);
        scene.add(plane);
      }

      //  绘制立方体
      function drawCube(scene, material) {
        //  THREE.CubeGeometry(width, height, depth, widthSegments, heightSegments, depthSegments)
        //    width是x方向上的长度；height是y方向上的长度；depth是z方向上的长度；
        //    后三个参数分别是在三个方向上的分段数，如widthSegments为3的话，代表x方向上水平分为三份。
        //    一般情况下不需要分段的话，可以不设置后三个参数，后三个参数的缺省值为1
        var cube = new THREE.Mesh(new THREE.CubeGeometry(1, 2, 3, 2, 2, 3), material);
        scene.add(cube);
      }

      //  绘制平面直角坐标系
      function drawAxes(scene) {
        // x-axis
        var xGeo = new THREE.Geometry();
        xGeo.vertices.push(new THREE.Vector3(0, 0, 0));
        xGeo.vertices.push(new THREE.Vector3(3, 0, 0));
        var xMat = new THREE.LineBasicMaterial({
            color: 0xff0000
        });
        var xAxis = new THREE.Line(xGeo, xMat);
        scene.add(xAxis);
        
        // y-axis
        var yGeo = new THREE.Geometry();
        yGeo.vertices.push(new THREE.Vector3(0, 0, 0));
        yGeo.vertices.push(new THREE.Vector3(0, 3, 0));
        var yMat = new THREE.LineBasicMaterial({
            color: 0x00ff00
        });
        var yAxis = new THREE.Line(yGeo, yMat);
        scene.add(yAxis);
        
        // z-axis
        var zGeo = new THREE.Geometry();
        zGeo.vertices.push(new THREE.Vector3(0, 0, 0));
        zGeo.vertices.push(new THREE.Vector3(0, 0, 3));
        var zMat = new THREE.LineBasicMaterial({
            color: 0x00ccff
        });
        var zAxis = new THREE.Line(zGeo, zMat);
        scene.add(zAxis);
      }

    </script>
  </head>
  
  <body onload="init()">
    <!-- WebGL 必须使用 Canvas 标签来渲染 -->
    <canvas id="mainCanvas" width="400px" height="300px" ></canvas>
  </body>
</html>